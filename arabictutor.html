<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×œ×•××“×” ×œ×‘×•×—×Ÿ ×‘×¢×¨×‘×™×ª</title>
    <!-- ×˜×¢×™× ×ª Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ×”×’×“×¨×ª ×¤×•× ×˜×™× - Noto Sans Arabic ×œ×¢×¨×‘×™×ª ×•-Inter ×œ×¢×‘×¨×™×ª */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* ××‘×˜×™×— ×©×”×˜×§×¡×˜ ×‘×¢×¨×‘×™×ª ×™×•×¦×’ ×›×¨××•×™ */
        [lang="ar"] {
            font-family: 'Noto Sans Arabic', sans-serif;
            font-size: 2.5rem; /* ×’×•×“×œ ×’×“×•×œ ×•×‘×¨×•×¨ ×œ×¢×¨×‘×™×ª */
            direction: rtl;
        }
        
        /* ×¡×’× ×•×Ÿ ×œ×›×¨×˜×™×¡×™×™×” ×¤×¢×™×œ×” */
        .tab-btn.active {
            border-color: #3b82f6;
            /* ×›×—×•×œ */
            color: #3b82f6;
            background-color: #eff6ff;
            /* ×›×—×•×œ ×‘×”×™×¨ ×¨×§×¢ */
        }
        
        /* ×¡×’× ×•×Ÿ ×‘×¡×™×¡×™ ×œ×›×¨×˜×™×¡×™×™×” */
        .tab-btn {
            transition: all 0.2s ease-in-out;
        }

        /* ×¡×’× ×•×Ÿ ×œ×›×¨×˜×™×¡ ×¤×œ××© */
        .flashcard {
            min-height: 250px;
            perspective: 1000px;
            cursor: pointer;
        }
        
        /* ×¢×™×¦×•×‘ ×”×ª×•×›×Ÿ ×©×œ ×”×›×¨×˜×™×¡ */
        .card-content {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
            border-radius: 0.5rem;
            background-color: #f3f4f6; /* ××¤×•×¨ ×‘×”×™×¨ */
            min-height: 250px;
            transition: background-color 0.2s;
        }
        
        .card-content:hover {
            background-color: #e5e7eb; /* ××¤×•×¨ ×§×¦×ª ×™×•×ª×¨ ×›×”×” */
        }

        /* ×¡×’× ×•×Ÿ ×œ×›×¤×ª×•×¨ ×”×§×¨××” */
        .speak-btn {
            background-color: #f97316; /* ×›×ª×•× */
            color: white;
        }
        .speak-btn:hover {
            background-color: #ea580c; /* ×›×ª×•× ×›×”×” */
        }
        .speak-btn:disabled {
            background-color: #9ca3af; /* ××¤×•×¨ */
            cursor: not-allowed;
        }

    </style>
</head>
<body class="bg-gray-100 min-h-screen pt-8 pb-12" dir="rtl">

    <div class="container max-w-4xl mx-auto p-4 sm:p-6">
        
        <!-- ×›×•×ª×¨×ª ×¨××©×™×ª -->
        <header class="text-center mb-6">
            <h1 class="text-4xl font-bold text-blue-800">×œ×•××“×” ×œ×‘×•×—×Ÿ ×‘×¢×¨×‘×™×ª - ×©×›×‘×ª ×—'</h1>
            <p class="text-lg text-gray-600 mt-2">×ª×¨×’×•×œ ××™× ×˜×¨××§×˜×™×‘×™ ×œ×—×•××¨ ×”×‘×•×—×Ÿ</p>
        </header>

        <main class="bg-white rounded-lg shadow-xl overflow-hidden">
            
            <!-- ×œ×©×•× ×™×•×ª × ×™×•×•×˜ -->
            <nav class="flex border-b border-gray-200">
                <button id="tab-letters-btn" class="tab-btn active flex-1 py-4 px-2 font-semibold text-gray-700 border-b-4" onclick="showTab('letters')">
                    <span class="text-xl">ğŸ” </span>
                    <span class="hidden sm:inline">×ª×¨×’×•×œ ××•×ª×™×•×ª</span>
                </button>
                <button id="tab-vocab-btn" class="tab-btn flex-1 py-4 px-2 font-semibold text-gray-500 border-b-4 border-transparent hover:text-blue-600" onclick="showTab('vocab')">
                    <span class="text-xl">ğŸ“š</span>
                    <span class="hidden sm:inline">××•×¦×¨ ××™×œ×™×</span>
                </button>
                <button id="tab-grammar-btn" class="tab-btn flex-1 py-4 px-2 font-semibold text-gray-500 border-b-4 border-transparent hover:text-blue-600" onclick="showTab('grammar')">
                    <span class="text-xl">ğŸ“</span>
                    <span class="hidden sm:inline">×“×§×“×•×§ (×ª× ××¨×‘×•×˜×”)</span>
                </button>
                <button id="tab-phrases-btn" class="tab-btn flex-1 py-4 px-2 font-semibold text-gray-500 border-b-4 border-transparent hover:text-blue-600" onclick="showTab('phrases')">
                    <span class="text-xl">ğŸ—£ï¸</span>
                    <span class="hidden sm:inline">×ª×¨×’×•× ×¦×™×¨×•×¤×™×</span>
                </button>
            </nav>

            <!-- ×ª×•×›×Ÿ ×”×œ×©×•× ×™×•×ª -->
            <div class="p-4 sm:p-8">

                <!-- 1. ×œ×©×•× ×™×ª ×ª×¨×’×•×œ ××•×ª×™×•×ª -->
                <div id="letters" class="tab-content">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ”  ×ª×¨×’×•×œ ××•×ª×™×•×ª</h2>
                    <p class="text-gray-600 mb-6">×œ×—×¥ ×¢×œ ×”×›×¨×˜×™×¡ ×›×“×™ ×œ×¨××•×ª ××ª ×©× ×”××•×ª. ×”×©×ª××© ×‘×›×¤×ª×•×¨×™× ×›×“×™ ×œ×¢×‘×•×¨ ×‘×™×Ÿ ×¦×•×¨×•×ª ×”×›×ª×™×‘×” ×©×œ ×”××•×ª×™×•×ª ×”× ×“×¨×©×•×ª.</p>
                    
                    <!-- ×›×¨×˜×™×¡ ×¤×œ××© ×œ××•×ª×™×•×ª -->
                    <div class="flashcard" onclick="flipCard('letter')">
                        <div id="letter-card-content" class="card-content">
                            <!-- ×ª×•×›×Ÿ ×”××•×ª ×™×˜×¢×Ÿ ×›××Ÿ -->
                        </div>
                    </div>
                    
                    <!-- ×›×¤×ª×•×¨×™ × ×™×•×•×˜ ×œ××•×ª×™×•×ª -->
                    <div class="flex justify-between mt-6">
                        <button class="py-2 px-5 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition" onclick="prevCard('letter')">
                            â†’ ×”×§×•×“×
                        </button>
                        <button class="py-2 px-5 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition" onclick="nextCard('letter')">
                            ×”×‘× â†
                        </button>
                    </div>
                </div>

                <!-- 2. ×œ×©×•× ×™×ª ××•×¦×¨ ××™×œ×™× -->
                <div id="vocab" class="tab-content" style="display:none;">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ“š ××•×¦×¨ ××™×œ×™×</h2>
                    <p class="text-gray-600 mb-6">×œ×—×¥ ×¢×œ ×”×›×¨×˜×™×¡ ×›×“×™ ×œ×¨××•×ª ××ª ×”×ª×¨×’×•×. ×”×©×ª××© ×‘×›×¤×ª×•×¨ "×”×—×œ×£ ×›×™×•×•×Ÿ" ×›×“×™ ×œ×ª×¨×’×œ ××¢×¨×‘×™×ª ×œ×¢×‘×¨×™×ª ××• ×œ×”×™×¤×š.</p>
                    
                    <!-- ×›×¨×˜×™×¡ ×¤×œ××© ×œ××•×¦×¨ ××™×œ×™× -->
                    <div class="flashcard" onclick="flipCard('vocab')">
                        <div id="vocab-card-content" class="card-content">
                            <!-- ×ª×•×›×Ÿ ×”××™×œ×” ×™×˜×¢×Ÿ ×›××Ÿ -->
                        </div>
                    </div>

                    <!-- ×›×¤×ª×•×¨×™ × ×™×•×•×˜ ×œ××•×¦×¨ ××™×œ×™× -->
                    <div class="flex flex-wrap justify-between items-center mt-6 gap-4">
                        <button class="py-2 px-5 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition" onclick="prevCard('vocab')">
                            â†’ ×”×§×•×“×
                        </button>
                        <button id="vocab-speak-btn" class="py-2 px-5 speak-btn font-semibold rounded-lg shadow-md transition">
                            ğŸ”Š ×”×§×¨× (×¢×¨×‘×™×ª)
                        </button>
                        <button class="py-2 px-5 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 transition" onclick="swapVocabDirection()">
                            â‡… ×”×—×œ×£ ×›×™×•×•×Ÿ (×›×¢×ª: ×¢×‘×¨×™×ª â† ×¢×¨×‘×™×ª)
                        </button>
                        <button class="py-2 px-5 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition" onclick="nextCard('vocab')">
                            ×”×‘× â†
                        </button>
                    </div>
                </div>

                <!-- 3. ×œ×©×•× ×™×ª ×“×§×“×•×§ (×ª× ××¨×‘×•×˜×”) -->
                <div id="grammar" class="tab-content" style="display:none;">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ“ ×“×§×“×•×§: ×”×•×¡×¤×ª Ø© (×ª× ××¨×‘×•×˜×”)</h2>
                    <p class="text-gray-600 mb-6">×”×¤×•×š ××ª ×”××™×œ×” ××–×›×¨ ×œ× ×§×‘×” ×¢×œ ×™×“×™ ×”×•×¡×¤×ª <b>Ø©</b>. ×”×§×œ×“ ××ª ×ª×©×•×‘×ª×š ×‘×ª×™×‘×” ×•×œ×—×¥ ×¢×œ "×‘×“×™×§×”".</p>
                    
                    <div class="bg-gray-100 p-6 rounded-lg">
                        <div class="mb-4">
                            <span class="text-lg text-gray-700">××™×œ×” ×‘×–×›×¨:</span>
                            <div id="grammar-question" class="text-4xl font-bold text-blue-800 my-2" lang="ar" dir="rtl">
                                <!-- ×©××œ×” ×ª×˜×¢×Ÿ ×›××Ÿ -->
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label for="grammar-input" class="block text-lg text-gray-700 mb-2">×”×§×œ×“ ××ª ×¦×•×¨×ª ×”× ×§×‘×”:</label>
                            <input type="text" id="grammar-input" class="w-full p-3 border border-gray-300 rounded-lg text-2xl" lang="ar" dir="rtl" placeholder="×”×§×œ×“ ×›××Ÿ ×‘×¢×¨×‘×™×ª...">
                        </div>

                        <!-- ××©×•×‘ (× ×›×•×Ÿ/×œ× × ×›×•×Ÿ) -->
                        <div id="grammar-feedback" class="h-8 text-lg font-semibold mb-4"></div>
                        
                        <!-- ×›×¤×ª×•×¨×™ ×‘×“×™×§×” ×•×”××©×š -->
                        <div class="flex justify-between flex-wrap gap-3">
                            <button class="py-2 px-6 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 transition" onclick="checkGrammarAnswer()">
                                ×‘×“×™×§×”
                            </button>
                            <button id="grammar-speak-question-btn" class="py-2 px-4 speak-btn font-semibold rounded-lg shadow-md transition">
                                ğŸ”Š ×”×§×¨× ×©××œ×”
                            </button>
                            <button id="grammar-speak-answer-btn" class="py-2 px-4 speak-btn font-semibold rounded-lg shadow-md transition" disabled>
                                ğŸ”Š ×”×§×¨× ×ª×©×•×‘×”
                            </button>
                            <button id="grammar-next-btn" class="py-2 px-6 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition" onclick="nextCard('grammar')" style="display:none;">
                                ×”×‘× â†
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 4. ×œ×©×•× ×™×ª ×ª×¨×’×•× ×¦×™×¨×•×¤×™× -->
                <div id="phrases" class="tab-content" style="display:none;">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ—£ï¸ ×ª×¨×’×•× ×¦×™×¨×•×¤×™×</h2>
                    <p class="text-gray-600 mb-6">×ª×¨×’×•×œ ×ª×¨×’×•× ×”×¦×™×¨×•×¤×™× ××“×£ ×”×ª×¨×’×•×œ. ×œ×—×¥ ×¢×œ ×”×›×¨×˜×™×¡ ×›×“×™ ×œ×¨××•×ª ××ª ×”×ª×¨×’×•×.</p>
                    
                    <!-- ×›×¨×˜×™×¡ ×¤×œ××© ×œ×¦×™×¨×•×¤×™× -->
                    <div class="flashcard" onclick="flipCard('phrase')">
                        <div id="phrase-card-content" class="card-content">
                            <!-- ×ª×•×›×Ÿ ×”×¦×™×¨×•×£ ×™×˜×¢×Ÿ ×›××Ÿ -->
                        </div>
                    </div>
                    
                    <!-- ×›×¤×ª×•×¨×™ × ×™×•×•×˜ ×œ×¦×™×¨×•×¤×™× -->
                    <div class="flex justify-between items-center mt-6">
                        <button class="py-2 px-5 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition" onclick="prevCard('phrase')">
                            â†’ ×”×§×•×“×
                        </button>
                        <button id="phrase-speak-btn" class="py-2 px-5 speak-btn font-semibold rounded-lg shadow-md transition">
                            ğŸ”Š ×”×§×¨× (×¢×¨×‘×™×ª)
                        </button>
                        <button class="py-2 px-5 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition" onclick="nextCard('phrase')">
                            ×”×‘× â†
                        </button>
                    </div>
                </div>

            </div>
        </main>
        
        <!-- ×§×¨×“×™×˜ -->
        <footer class="text-center text-gray-500 mt-8">
            ×‘×”×¦×œ×—×” ×‘×‘×•×—×Ÿ!
        </footer>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- 0. ×××’×¨ ×§×•×œ×•×ª ×•×¤×•× ×§×¦×™×™×ª ×“×™×‘×•×¨ ---
        let arabicVoices = [];

        // ×¤×•× ×§×¦×™×” ×œ×˜×¢×™× ×ª ×§×•×œ×•×ª ×‘×¢×¨×‘×™×ª
        function loadVoices() {
            if ('speechSynthesis' in window) {
                arabicVoices = speechSynthesis.getVoices().filter(voice => voice.lang.startsWith('ar'));
            }
        }
        
        // ×˜×¢×™× ×ª ×”×§×•×œ×•×ª
        loadVoices();
        if ('speechSynthesis' in window && speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = loadVoices;
        }

        // ×¤×•× ×§×¦×™×™×ª ×”×”×§×¨××”
        function speakArabic(text) {
            if (!'speechSynthesis' in window) {
                console.warn('Speech synthesis not supported in this browser.');
                return;
            }
            // ×¢×¦×™×¨×ª ×”×§×¨××” ×§×•×“××ª ×× ×§×™×™××ª
            speechSynthesis.cancel();

            const utterance = new SpeechSynthesisUtterance(text);
            
            // × ×¡×™×•×Ÿ ×œ××¦×•× ×§×•×œ ×‘×¢×¨×‘×™×ª
            if (arabicVoices.length > 0) {
                utterance.voice = arabicVoices[0]; // ×©×™××•×© ×‘×§×•×œ ×”×¢×¨×‘×™ ×”×¨××©×•×Ÿ ×©× ××¦×
            } else {
                // ×× ×œ× × ××¦× ×§×•×œ ×¡×¤×¦×™×¤×™, ××’×“×™×¨×™× ××ª ×”×©×¤×” (fallback)
                utterance.lang = 'ar-SA'; // ×¢×¨×‘×™×ª (×¢×¨×‘ ×”×¡×¢×•×“×™×ª) ×›×‘×¨×™×¨×ª ××—×“×œ
            }
            
            utterance.rate = 0.9; // ×”×§×¨××” ××¢×˜ ××™×˜×™×ª ×™×•×ª×¨ ×œ×‘×”×™×¨×•×ª
            speechSynthesis.speak(utterance);
        }


        // --- 1. ×××’×¨×™ × ×ª×•× ×™× (×œ×¤×™ ×§×•×‘×¥ ×”-PDF) ---

        // × ×ª×•× ×™× ×œ×ª×¨×’×•×œ ××•×ª×™×•×ª
        const letterData = [
            { n: '××œ×™×£', f: ['Ø§'] },
            { n: '×‘×', f: ['Ø¨', 'Ø¨Ù€', 'Ù€Ø¨Ù€', 'Ù€Ø¨'] },
            { n: '×ª×', f: ['Øª', 'ØªÙ€', 'Ù€ØªÙ€', 'Ù€Øª'] },
            { n: '×“××œ', f: ['Ø¯'] },
            { n: '×•××•', f: ['Ùˆ'] },
            { n: '×–××™', f: ['Ø²'] },
            { n: '×¨×', f: ['Ø±'] },
            { n: '×™×', f: ['ÙŠ', 'ÙŠÙ€', 'Ù€ÙŠÙ€', 'Ù€ÙŠ'] },
            { n: '× ×•×Ÿ', f: ['Ù†', 'Ù†Ù€', 'Ù€Ù†Ù€', 'Ù€Ù†'] },
            { n: '×”×', f: ['Ù‡', 'Ù‡Ù€', 'Ù€Ù‡Ù€', 'Ù€Ù‡'] },
            { n: '×›××£', f: ['Ùƒ', 'ÙƒÙ€', 'Ù€ÙƒÙ€', 'Ù€Ùƒ'] },
            { n: '×œ××', f: ['Ù„', 'Ù„Ù€', 'Ù€Ù„Ù€', 'Ù€Ù„'] },
            { n: '××™×', f: ['Ù…', 'Ù…Ù€', 'Ù€Ù…Ù€', 'Ù€Ù…'] },
            { n: '×¡×™×Ÿ', f: ['Ø³', 'Ø³Ù€', 'Ù€Ø³Ù€', 'Ù€Ø³'] },
            { n: '×©×™×Ÿ', f: ['Ø´', 'Ø´Ù€', 'Ù€Ø´Ù€', 'Ù€Ø´'] },
            { n: '×¤×', f: ['Ù', 'ÙÙ€', 'Ù€ÙÙ€', 'Ù€Ù'] },
            { n: '×§××£', f: ['Ù‚', 'Ù‚Ù€', 'Ù€Ù‚Ù€', 'Ù€Ù‚'] },
            { n: '×¦××“', f: ['Øµ', 'ØµÙ€', 'Ù€ØµÙ€', 'Ù€Øµ'] },
            { n: '×“××“', f: ['Ø¶', 'Ø¶Ù€', 'Ù€Ø¶Ù€', 'Ù€Ø¶'] },
            { n: '×¢×™×Ÿ', f: ['Ø¹', 'Ø¹Ù€', 'Ù€Ø¹Ù€', 'Ù€Ø¹'] }
        ];

        // ×™×¦×™×¨×ª "×—×¤×™×¡×ª" ×›×¨×˜×™×¡×™× ×©×˜×•×—×” ××¦×•×¨×•×ª ×”××•×ª×™×•×ª
        let letterDeck = [];
        letterData.forEach(letter => {
            if (letter.f.length === 1) {
                letterDeck.push({ front: `<span lang="ar">${letter.f[0]}</span>`, back: `${letter.n} (×¦×•×¨×” ×™×—×™×“×”)` });
            } else if (letter.f.length === 2) {
                letterDeck.push({ front: `<span lang="ar">${letter.f[0]}</span>`, back: `${letter.n} (× ×¤×¨×“×ª / ×¡×•×¤×™×ª)` });
                letterDeck.push({ front: `<span lang="ar">${letter.f[1]}</span>`, back: `${letter.n} (×ª×—×™×œ×™×ª / ×××¦×¢×™×ª)` });
            } else if (letter.f.length === 4) {
                letterDeck.push({ front: `<span lang="ar">${letter.f[0]}</span>`, back: `${letter.n} (× ×¤×¨×“×ª)` });
                letterDeck.push({ front: `<span lang="ar">${letter.f[1]}</span>`, back: `${letter.n} (×ª×—×™×œ×™×ª)` });
                letterDeck.push({ front: `<span lang="ar">${letter.f[2]}</span>`, back: `${letter.n} (×××¦×¢×™×ª)` });
                letterDeck.push({ front: `<span lang="ar">${letter.f[3]}</span>`, back: `${letter.n} (×¡×•×¤×™×ª)` });
            }
        });

        // × ×ª×•× ×™× ×œ××•×¦×¨ ××™×œ×™×
        let vocabData = [
            { he: '×™×œ×“', ar: 'ÙˆÙÙ„ÙØ¯' },
            { he: '×™×œ×“×™×', ar: 'Ø£ÙÙˆÙ’Ù„ÙØ§Ø¯' },
            { he: '×‘×ª/×™×œ×“×”', ar: 'Ø¨ÙÙ†Ù’Øª' },
            { he: '×‘× ×•×ª', ar: 'Ø¨ÙÙ†ÙØ§Øª' },
            { he: '××‘', ar: 'Ø£ÙØ¨' },
            { he: '××', ar: 'Ø£ÙÙ…Ù‘' },
            { he: '×“×¨×•×–×™', ar: 'Ø¯ÙØ±Ù’Ø²ÙÙŠÙ‘' },
            { he: '××“×™× ×”', ar: 'Ø¯ÙÙˆÙ’Ù„ÙØ©' },
            { he: '×× ×”×œ', ar: 'Ù…ÙØ¯ÙÙŠØ±' },
            { he: '×¢×™×¨', ar: 'Ù…ÙØ¯ÙÙŠÙ†ÙØ©' },
            { he: '×ª×œ××™×“', ar: 'ØªÙÙ„Ù’Ù…ÙÙŠØ°' },
            { he: '×—× ×•×ª', ar: 'Ø¯ÙÙƒÙÙ‘Ø§Ù†' },
            { he: '×‘×™×ª ×¡×¤×¨', ar: 'Ù…ÙØ¯Ù’Ø±ÙØ³ÙØ©' },
            { he: '×’×Ÿ', ar: 'Ø¨ÙØ³Ù’ØªÙØ§Ù†' },
            { he: '×©×', ar: 'Ø¥ÙØ³Ù’Ù…' },
            { he: '××©×¤×—×”', ar: 'Ø£ÙØ³Ù’Ø±ÙØ©' },
            { he: '××•×¨×”', ar: 'Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…' },
            { he: '×©×¤×”', ar: 'Ù„ÙØºÙØ©' },
            { he: '××•×¨×—', ar: 'Ø¶ÙÙŠÙ’Ù' },
            { he: '×× ×™', ar: 'Ø£ÙÙ†ÙØ§' },
            { he: '×”×•×', ar: 'Ù‡ÙÙˆÙ' },
            { he: '×”×™×', ar: 'Ù‡ÙÙŠÙ' },
            { he: '×”×’×™×¢', ar: 'ÙˆÙØµÙÙ„Ù' },
            { he: '×”×’×™×¢×”', ar: 'ÙˆÙØµÙÙ„ÙØªÙ’' },
            { he: '× ×¡×¢', ar: 'Ø³ÙØ§ÙÙØ±Ù' },
            { he: '×§×¨×•×‘ ×œ', ar: 'Ù‚ÙØ±ÙÙŠØ¨ Ù…ÙÙ†' },
            { he: '×§×“×•×©', ar: 'Ù…ÙÙ‚ÙØ¯ÙÙ‘Ø³' },
            { he: '×’×“×•×œ', ar: 'ÙƒÙØ¨ÙÙŠØ±' },
            { he: '××¦×•×™×Ÿ', ar: 'Ù…ÙÙ…Ù’ØªÙØ§Ø²' },
            { he: '×™×”×•×“×™', ar: 'ÙŠÙÙ‡ÙÙˆØ¯ÙÙŠÙ‘' },
            { he: '×¢×¨×‘×™', ar: 'Ø¹ÙØ±ÙØ¨ÙÙŠÙ‘' },
            { he: '××•×¡×œ××™', ar: 'Ù…ÙØ³Ù’Ù„ÙÙ…' },
            { he: '×œ×‘× ×•× ×™', ar: 'Ù„ÙØ¨Ù’Ù†ÙØ§Ù†ÙÙŠÙ‘' },
            { he: '×...', ar: 'Ù…ÙÙ†' },
            { he: '×‘...', ar: 'ÙÙÙŠ' },
            { he: '××œ', ar: 'Ø¥ÙÙ„ÙÙ‰' },
            { he: '×•...', ar: 'ÙˆÙ' },
            { he: '××™×¤×”/×”×™×›×Ÿ', ar: 'Ø£ÙÙŠÙ’Ù†Ù' },
            { he: '×œ××”/××“×•×¢', ar: 'Ù„ÙÙ…ÙØ§Ø°ÙØ§' },
                { he: '××™×–×”', ar: 'Ø£ÙÙŠÙ‘' },
                { he: '×—×“×©', ar: 'Ø¬ÙØ¯ÙÙŠØ¯' },
                { he: '×—×•×“×©', ar: 'Ø´ÙÙ‡Ù’Ø±' },
                { he: '×©× ×”', ar: 'Ø³ÙÙ†ÙØ©' },
                { he: '×™×•×', ar: 'ÙŠÙÙˆÙ’Ù…' },
                { he: '×™×•× ×¨×‘×™×¢×™', ar: 'ÙŠÙˆÙ… Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡' },
                { he: '×¢×œ', ar: 'Ø¹ÙÙ„ÙÙ‰' },
                { he: '××¦×œ', ar: 'Ø¹ÙÙ†Ù’Ø¯Ù' },
                { he: '××ª×™', ar: 'Ù…ÙØªÙ‰' },
                { he: '×›××”', ar: 'ÙƒÙÙ…' },
                { he: '××¦×¨×™×', ar: 'Ù…ØµØ±' },
                { he: '×œ×‘× ×•×Ÿ', ar: 'Ù„Ø¨Ù†Ø§Ù†' },
                { he: '×××¨×™×§×”', ar: 'Ø£Ù…Ø±ÙŠÙƒØ§' },
                { he: '×–×™×“', ar: 'Ø²ÙŠØ¯' },
                { he: '×™×•×¡×£', ar: 'ÙŠÙˆØ³Ù' },
                { he: '×©×™×£', ar: 'Ø´Ø±ÙŠÙ' },
                { he: '××¨×™×', ar: 'Ù…Ø±ÙŠÙ…' },
                { he: '×××™×¨', ar: 'Ø£Ù…ÙŠØ±' },
                { he: '××•×¨×” (× ×§×‘×”)', ar: 'Ù…Ø¹Ù„Ù‘ÙÙ…Ø©' },
                { he: '×ª×œ××™×“×”', ar: 'Ø·Ø§Ù„ÙØ¨Ø©' },
                { he: '××©×¤×—×” (××©×•×ª×£)', ar: 'Ø¹ÙØ§Ø¦ÙÙ„ÙØ©' }
        ];

        // × ×ª×•× ×™× ×œ×“×§×“×•×§ (×ª× ××¨×‘×•×˜×”)
        const grammarData = [
            { m: 'Ù…ÙÙ…Ù’ØªÙØ§Ø²', f: 'Ù…ÙÙ…Ù’ØªÙØ§Ø²ÙØ©' },
            { m: 'Ø¹ÙØ±ÙØ¨ÙÙŠÙ‘', f: 'Ø¹ÙØ±ÙØ¨ÙÙŠÙÙ‘Ø©' },
            { m: 'Ù„ÙØ¨Ù’Ù†ÙØ§Ù†ÙÙŠÙ‘', f: 'Ù„ÙØ¨Ù’Ù†ÙØ§Ù†ÙÙŠÙÙ‘Ø©' },
            { m: 'Ù…ÙØ³Ù’Ù„ÙÙ…', f: 'Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ©' },
            { m: 'ÙƒÙØ¨ÙÙŠØ±', f: 'ÙƒÙØ¨ÙÙŠØ±ÙØ©' },
            { m: 'ÙŠÙÙ‡ÙÙˆØ¯ÙÙŠÙ‘', f: 'ÙŠÙÙ‡ÙÙˆØ¯ÙÙŠÙÙ‘Ø©' },
            { m: 'Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…', f: 'Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙØ©' },
            { m: 'ØªÙÙ„Ù’Ù…ÙÙŠØ°', f: 'ØªÙÙ„Ù’Ù…ÙÙŠØ°ÙØ©' },
                { m: 'Ù…ÙØ¯ÙÙŠØ±', f: 'Ù…ÙØ¯ÙÙŠØ±ÙØ©' },
                { m: 'Ø¬ÙØ¯ÙÙŠØ¯', f: 'Ø¬ÙØ¯ÙÙŠØ¯ÙØ©' },
                { m: 'Ø·Ø§Ù„Ø¨', f: 'Ø·Ø§Ù„Ø¨Ø©' }
        ];
        
        // × ×ª×•× ×™× ×œ×¦×™×¨×•×¤×™×
        const phraseData = [
            { he: '×™×¨×•×©×œ×™× ×”×§×“×•×©×”', ar: 'Ø£ÙÙˆØ±Ù’Ø´ÙÙ„ÙÙŠÙ… Ø§Ù„Ù’Ù‚ÙØ¯Ù’Ø³' },
            { he: '×¢×™×¨ ×§×“×•×©×”', ar: 'Ù…ÙØ¯ÙÙŠÙ†ÙØ© Ù…ÙÙ‚ÙØ¯ÙÙ‘Ø³ÙØ©' },
            { he: '×§×¨×•×‘ ×œ×‘×™×ª ×”×¡×¤×¨', ar: 'Ù‚ÙØ±ÙÙŠØ¨ Ù…ÙÙ† Ù±Ù„Ù’Ù…ÙØ¯Ù’Ø±ÙØ³ÙØ©' },
            { he: '×”×™×œ×“×™× × ×¡×¢×•', ar: 'Ø³ÙØ§ÙÙØ±Ù Ù±Ù„Ù’Ø£ÙÙˆÙ’Ù„ÙØ§Ø¯' }
        ];


        // --- 2. ××©×ª× ×™ ××¦×‘ ×’×œ×•×‘×œ×™×™× ---
        let currentIndices = {
            letter: 0,
            vocab: 0,
            grammar: 0,
            phrase: 0
        };
        let isFlipped = {
            letter: false,
            vocab: false,
            phrase: false
        };
        let vocabDirectionHeToAr = true;

        // --- 3. DOM References (×§×™×©×•×¨×™× ×œ××œ×× ×˜×™× ×‘-HTML) ---
        
        const tabs = {
            letters: document.getElementById('letters'),
            vocab: document.getElementById('vocab'),
            grammar: document.getElementById('grammar'),
            phrases: document.getElementById('phrases')
        };
        
        const tabButtons = {
            letters: document.getElementById('tab-letters-btn'),
            vocab: document.getElementById('tab-vocab-btn'),
            grammar: document.getElementById('tab-grammar-btn'),
            phrases: document.getElementById('tab-phrases-btn')
        };

        const cardContents = {
            letter: document.getElementById('letter-card-content'),
            vocab: document.getElementById('vocab-card-content'),
            phrase: document.getElementById('phrase-card-content')
        };

        const grammar = {
            question: document.getElementById('grammar-question'),
            input: document.getElementById('grammar-input'),
            feedback: document.getElementById('grammar-feedback'),
            nextBtn: document.getElementById('grammar-next-btn'),
            speakQuestionBtn: document.getElementById('grammar-speak-question-btn'),
            speakAnswerBtn: document.getElementById('grammar-speak-answer-btn')
        };

        const vocabSpeakBtn = document.getElementById('vocab-speak-btn');
        const phraseSpeakBtn = document.getElementById('phrase-speak-btn');
        const vocabSwapBtn = document.querySelector('[onclick="swapVocabDirection()"]');

        // --- 4. ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ ---

        // ×¤×•× ×§×¦×™×” ×œ×”×—×œ×¤×ª ×œ×©×•× ×™×•×ª
        window.showTab = (tabId) => {
            Object.values(tabs).forEach(tab => tab.style.display = 'none');
            Object.values(tabButtons).forEach(btn => btn.classList.remove('active', 'text-blue-600', 'border-blue-500', 'bg-blue-50'));
            tabs[tabId].style.display = 'block';
            tabButtons[tabId].classList.add('active', 'text-blue-600', 'border-blue-500', 'bg-blue-50');
        };

        // ×¤×•× ×§×¦×™×” ×œ×¢×¨×‘×•×‘ ××¢×¨×š (Fisher-Yates shuffle)
        const shuffle = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        };

        // --- 5. ×œ×•×’×™×§×” ×©×œ ×›×¨×˜×™×¡×™ ×¤×œ××© (××•×ª×™×•×ª, ××™×œ×™×, ×¦×™×¨×•×¤×™×) ---
        
        const loadCard = (type) => {
            let deck, data;
            const index = currentIndices[type];

            if (type === 'letter') {
                deck = letterDeck;
                data = deck[index];
                cardContents.letter.innerHTML = data.front;
            } else if (type === 'vocab') {
                deck = vocabData;
                data = deck[index];
                const front = vocabDirectionHeToAr ? data.he : `<span lang="ar">${data.ar}</span>`;
                const back = vocabDirectionHeToAr ? `<span lang="ar">${data.ar}</span>` : data.he;
                cardContents.vocab.innerHTML = `<span class="${vocabDirectionHeToAr ? '' : 'text-3xl'}">${front}</span>`;
                cardContents.vocab.dataset.back = `<span class="${vocabDirectionHeToAr ? 'text-3xl' : ''}">${back}</span>`;
            } else if (type === 'phrase') {
                deck = phraseData;
                data = deck[index];
                cardContents.phrase.innerHTML = `<span class="text-3xl">${data.he}</span>`;
                cardContents.phrase.dataset.back = `<span lang="ar" class="text-3xl">${data.ar}</span>`;
            }
            
            isFlipped[type] = false;
        };

        window.flipCard = (type) => {
            const card = cardContents[type];
            const index = currentIndices[type];
            let data, front, back;

            if (type === 'letter') {
                data = letterDeck[index];
                front = data.front;
                back = `<span class="text-3xl">${data.back}</span>`;
            } else if (type === 'vocab') {
                data = vocabData[index];
                front = vocabDirectionHeToAr ? data.he : `<span lang="ar">${data.ar}</span>`;
                back = vocabDirectionHeToAr ? `<span lang="ar">${data.ar}</span>` : data.he;
                card.innerHTML = `<span class="${vocabDirectionHeToAr ? '' : 'text-3xl'}">${front}</span>`;
                card.dataset.back = `<span class="${vocabDirectionHeToAr ? 'text-3xl' : ''}">${back}</span>`;
            } else if (type === 'phrase') {
                data = phraseData[index];
                front = `<span class="text-3xl">${data.he}</span>`;
                back = `<span lang="ar" class="text-3xl">${data.ar}</span>`;
                card.dataset.back = back;
            }

            if (isFlipped[type]) {
                if(type === 'letter') card.innerHTML = front;
                else if (type === 'vocab') card.innerHTML = `<span class="${vocabDirectionHeToAr ? '' : 'text-3xl'}">${front}</span>`;
                else card.innerHTML = front;
            } else {
                if(type === 'letter') card.innerHTML = back;
                else if (type === 'vocab') card.innerHTML = card.dataset.back;
                else card.innerHTML = card.dataset.back;
            }
            isFlipped[type] = !isFlipped[type];
        };
        
        window.nextCard = (type) => {
            const deckLength = (type === 'letter') ? letterDeck.length : (type === 'vocab') ? vocabData.length : (type === 'grammar') ? grammarData.length : phraseData.length;
            currentIndices[type] = (currentIndices[type] + 1) % deckLength;
            
            if (type === 'grammar') loadGrammarQuestion();
            else loadCard(type);
        };
        
        window.prevCard = (type) => {
            const deckLength = (type === 'letter') ? letterDeck.length : (type === 'vocab') ? vocabData.length : (type === 'grammar') ? grammarData.length : phraseData.length;
            currentIndices[type] = (currentIndices[type] - 1 + deckLength) % deckLength;

            if (type === 'grammar') loadGrammarQuestion();
            else loadCard(type);
        };

        window.swapVocabDirection = () => {
            vocabDirectionHeToAr = !vocabDirectionHeToAr;
            const directionText = vocabDirectionHeToAr ? "×¢×‘×¨×™×ª â† ×¢×¨×‘×™×ª" : "×¢×¨×‘×™×ª â† ×¢×‘×¨×™×ª";
            vocabSwapBtn.textContent = `â‡… ×”×—×œ×£ ×›×™×•×•×Ÿ (×›×¢×ª: ${directionText})`;
            loadCard('vocab');
        };

        // --- 6. ×œ×•×’×™×§×” ×©×œ ×ª×¨×’×•×œ ×“×§×“×•×§ ---

        const loadGrammarQuestion = () => {
            const index = currentIndices.grammar;
            const question = grammarData[index];
            grammar.question.textContent = question.m;
            grammar.input.value = '';
            grammar.feedback.textContent = '';
            grammar.input.disabled = false;
            grammar.nextBtn.style.display = 'none';
            grammar.feedback.classList.remove('text-green-600', 'text-red-600');
            // × ×˜×¨×•×œ ×›×¤×ª×•×¨ ×”×§×¨××ª ×ª×©×•×‘×”
            grammar.speakAnswerBtn.disabled = true;
            grammar.speakAnswerBtn.classList.add('speak-btn:disabled');
        };

        window.checkGrammarAnswer = () => {
            const index = currentIndices.grammar;
            const correctAnswer = grammarData[index].f;
            const userAnswer = grammar.input.value.trim(); 

            // ×”×¤×¢×œ×ª ×›×¤×ª×•×¨ ×”×§×¨××ª ×ª×©×•×‘×”
            grammar.speakAnswerBtn.disabled = false;
            grammar.speakAnswerBtn.classList.remove('speak-btn:disabled');

            if (userAnswer === correctAnswer) {
                grammar.feedback.textContent = '××¢×•×œ×”! ×ª×©×•×‘×” × ×›×•× ×”.';
                grammar.feedback.classList.add('text-green-600');
                grammar.feedback.classList.remove('text-red-600');
                grammar.input.disabled = true;
                grammar.nextBtn.style.display = 'block';
            } else {
                grammar.feedback.textContent = `×œ× × ×›×•×Ÿ. ×”×ª×©×•×‘×” ×”× ×›×•× ×” ×”×™×: ${correctAnswer}.`;
                grammar.feedback.classList.add('text-red-600');
                grammar.feedback.classList.remove('text-green-600');
                grammar.nextBtn.style.display = 'block';
            }
        };

        // --- 7. ××ª×—×•×œ ×”×œ×•××“×” ---
        
        const initializeLomedah = () => {
            shuffle(letterDeck);
            shuffle(vocabData);
            shuffle(grammarData);
            shuffle(phraseData);

            loadCard('letter');
            loadCard('vocab');
            loadGrammarQuestion();
            loadCard('phrase');
            
            showTab('letters');

            // ×”×•×¡×¤×ª event listeners
            grammar.input.addEventListener('keyup', (event) => {
                if (event.key === 'Enter') {
                    checkGrammarAnswer();
                }
            });

            // ×”××–× ×” ×œ×›×¤×ª×•×¨×™ ×”×§×¨××”
            vocabSpeakBtn.addEventListener('click', () => {
                const index = currentIndices.vocab;
                speakArabic(vocabData[index].ar);
            });

            phraseSpeakBtn.addEventListener('click', () => {
                const index = currentIndices.phrase;
                speakArabic(phraseData[index].ar);
            });

            grammar.speakQuestionBtn.addEventListener('click', () => {
                const index = currentIndices.grammar;
                speakArabic(grammarData[index].m);
            });

            grammar.speakAnswerBtn.addEventListener('click', () => {
                const index = currentIndices.grammar;
                speakArabic(grammarData[index].f);
            });
        };

        initializeLomedah();
    });
    </script>
</body>
</html>

